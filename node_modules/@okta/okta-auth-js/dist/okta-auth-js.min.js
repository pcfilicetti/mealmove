/*!
 * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.
 * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the "License.")
 * 
 * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * 
 * See the License for the specific language governing permissions and limitations under the License.
 * 
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OktaAuth=t():e.OktaAuth=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){var r=n(2);e.exports=n(5)(r)},function(e,t,n){function r(e,t,n){var r=o({url:t,method:e,headers:n.headers,data:JSON.stringify(n.data),withCredentials:!0}).then(function(){return r.request});return r}var o=n(3);e.exports=r},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;/*!
	  * Reqwest! A general purpose XHR connection manager
	  * license MIT (c) Dustin Diaz 2015
	  * https://github.com/ded/reqwest
	  */
!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():(__WEBPACK_AMD_DEFINE_FACTORY__=n,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,r=t.headers||{};r.Accept=r.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var o="undefined"!=typeof FormData&&t.data instanceof FormData;t.crossOrigin||r[requestedWith]||(r[requestedWith]=defaultHeaders.requestedWith),r[contentType]||o||(r[contentType]=t.contentType||defaultHeaders.contentType);for(n in r)r.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,r[n])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,r){var o=uniqid++,i=e.jsonpCallback||"callback",s=e.jsonpCallbackName||reqwest.getcallbackPrefix(o),a=new RegExp("((^|\\?|&)"+i+")=([^&]+)"),u=r.match(a),c=doc.createElement("script"),p=0,l=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return u?"?"===u[3]?r=r.replace(a,"$1="+s):s=u[3]:r=urlappend(r,i+"="+s),context[s]=generalCallback,c.type="text/javascript",c.src=r,c.async=!0,"undefined"==typeof c.onreadystatechange||l||(c.htmlFor=c.id="_reqwest_"+o),c.onload=c.onreadystatechange=function(){return!(c[readyState]&&"complete"!==c[readyState]&&"loaded"!==c[readyState]||p)&&(c.onload=c.onreadystatechange=null,c.onclick&&c.onclick(),t(lastValue),lastValue=void 0,head.removeChild(c),void(p=1))},head.appendChild(c),{abort:function(){c.onload=c.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(c),p=1}}}function getRequest(e,t){var n,r=this.o,o=(r.method||"GET").toUpperCase(),i="string"==typeof r?r:r.url,s=r.processData!==!1&&r.data&&"string"!=typeof r.data?reqwest.toQueryString(r.data):r.data||null,a=!1;return"jsonp"!=r.type&&"GET"!=o||!s||(i=urlappend(i,s),s=null),"jsonp"==r.type?handleJsonp(r,e,t,i):(n=r.xhr&&r.xhr(r)||xhr(r),n.open(o,i,r.async!==!1),setHeaders(n,r),setCredentials(n,r),context[xDomainRequest]&&n instanceof context[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},a=!0):n.onreadystatechange=handleReadyState(this,e,t),r.before&&r.before(n),a?setTimeout(function(){n.send(s)},200):n.send(s),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(null!==e)return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,r,o,i,s=e.name,a=e.tagName.toLowerCase(),u=function(e){e&&!e.disabled&&t(s,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&s)switch(a){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),r=/radio/i.test(e.type),o=e.value,(!(n||r)||e.checked)&&t(s,normalize(n&&""===o?"on":o)));break;case"textarea":t(s,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())u(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(i=0;e.length&&i<e.length;i++)e.options[i].selected&&u(e.options[i])}}function eachFormElement(){var e,t,n=this,r=function(e,t){var r,o,i;for(r=0;r<t.length;r++)for(i=e[byTag](t[r]),o=0;o<i.length;o++)serial(i[o],n)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),r(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,r){var o,i,s,a=/\[\]$/;if(isArray(t))for(i=0;t&&i<t.length;i++)s=t[i],n||a.test(e)?r(e,s):buildParams(e+"["+("object"==typeof s?i:"")+"]",s,n,r);else if(t&&"[object Object]"===t.toString())for(o in t)buildParams(e+"["+o+"]",t[o],n,r);else r(e,t)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=__webpack_require__(4)}catch(ex){throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,r,o=t||!1,i=[],s=encodeURIComponent,a=function(e,t){t="function"==typeof t?t():null==t?"":t,i[i.length]=s(e)+"="+s(t)};if(isArray(e))for(r=0;e&&r<e.length;r++)a(e[r].name,e[r].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],o,a);return i.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})},function(e,t){},function(e,t,n){function r(e){var t=this;if(!e)throw new l("No arguments passed to constructor. Required usage: new OktaAuth(args)");var n=e.url;if(!n){var r=new RegExp("^http?s?://.+");if(!e.issuer||!r.test(e.issuer))throw new l('No url passed to constructor. Required usage: new OktaAuth({url: "https://sample.okta.com"})');n=e.issuer.split("/oauth2/")[0]}if(n.indexOf("-admin.")!==-1)throw new l('URL passed to constructor contains "-admin" in subdomain. Required usage: new OktaAuth({url: "https://dev-12345.okta.com})');this.options={url:s.removeTrailingSlash(n),clientId:e.clientId,issuer:s.removeTrailingSlash(e.issuer),authorizeUrl:s.removeTrailingSlash(e.authorizeUrl),userinfoUrl:s.removeTrailingSlash(e.userinfoUrl),redirectUri:e.redirectUri,ajaxRequest:e.ajaxRequest,transformErrorXHR:e.transformErrorXHR,headers:e.headers},this.userAgent="okta-auth-js-"+f.SDK_VERSION,e.maxClockSkew||0===e.maxClockSkew?this.options.maxClockSkew=e.maxClockSkew:this.options.maxClockSkew=f.DEFAULT_MAX_CLOCK_SKEW,this.options.ignoreSignature=!!e.ignoreSignature,t.session={close:s.bind(u.closeSession,null,t),exists:s.bind(u.sessionExists,null,t),get:s.bind(u.getSession,null,t),refresh:s.bind(u.refreshSession,null,t),setCookieAndRedirect:s.bind(u.setCookieAndRedirect,null,t)},t.tx={status:s.bind(a.transactionStatus,null,t),resume:s.bind(a.resumeTransaction,null,t),exists:s.bind(a.transactionExists,null,t)},t.tx.exists._getCookie=function(e){return c.getCookie(e)},t.idToken={authorize:{_getLocationHref:function(){return window.location.href}}},t.token={getWithoutPrompt:s.bind(p.getWithoutPrompt,null,t),getWithPopup:s.bind(p.getWithPopup,null,t),getWithRedirect:s.bind(p.getWithRedirect,null,t),parseFromUrl:s.bind(p.parseFromUrl,null,t),decode:p.decodeToken,renew:s.bind(p.renewToken,null,t),getUserInfo:s.bind(p.getUserInfo,null,t),verify:s.bind(p.verifyToken,null,t)},t.token.getWithRedirect._setLocation=function(e){window.location=e},t.token.parseFromUrl._getHistory=function(){return window.history},t.token.parseFromUrl._getLocation=function(){return window.location},t.token.parseFromUrl._getDocument=function(){return window.document},t.fingerprint._getUserAgent=function(){return navigator.userAgent};var o=/windows phone|iemobile|wpdesktop/i;t.features.isFingerprintSupported=function(){var e=t.fingerprint._getUserAgent();return e&&!o.test(e)},t.tokenManager=new d(t,e.tokenManager)}n(6);var o=n(8),i=n(11),s=n(13),a=n(21),u=n(23),c=n(14),p=n(24),l=n(18),f=n(19),d=n(27),h=n(12),m=r.prototype;m.features={},m.features.isPopupPostMessageSupported=function(){var e=document.documentMode&&document.documentMode<10;return!(!window.postMessage||e)},m.features.isTokenVerifySupported=function(){return"undefined"!=typeof crypto&&crypto.subtle&&"undefined"!=typeof Uint8Array},m.signIn=function(e){function t(t){return delete e.sendFingerprint,a.postToTransaction(n,"/api/v1/authn",e,t)}var n=this;return e=s.clone(e||{}),e.sendFingerprint?n.fingerprint().then(function(e){return t({headers:{"X-Device-Fingerprint":e}})}):t()},m.signOut=function(){return this.session.close()},m.forgotPassword=function(e){return a.postToTransaction(this,"/api/v1/authn/recovery/password",e)},m.unlockAccount=function(e){return a.postToTransaction(this,"/api/v1/authn/recovery/unlock",e)},m.verifyRecoveryToken=function(e){return a.postToTransaction(this,"/api/v1/authn/recovery/token",e)},m.webfinger=function(e){var t="/.well-known/webfinger"+s.toQueryParams(e),n={headers:{Accept:"application/jrd+json"}};return h.get(this,t,n)},m.fingerprint=function(e){function t(e){if(e&&e.data&&e.origin===n.options.url){try{var t=JSON.parse(e.data)}catch(o){return r.reject(new l("Unable to parse iframe response"))}if(t)return"FingerprintAvailable"===t.type?r.resolve(t.fingerprint):void("FingerprintServiceReady"===t.type&&e.source.postMessage(JSON.stringify({type:"GetFingerprint"}),e.origin))}}e=e||{};var n=this;if(!n.features.isFingerprintSupported())return o.reject(new l("Fingerprinting is not supported on this device"));var r=o.defer(),s=document.createElement("iframe");s.style.display="none",i.addListener(window,"message",t),s.src=n.options.url+"/auth/services/devicefingerprint",document.body.appendChild(s);var a=setTimeout(function(){r.reject(new l("Fingerprinting timed out"))},e.timeout||15e3);return r.promise.fin(function(){clearTimeout(a),i.removeListener(window,"message",t),document.body.contains(s)&&s.parentElement.removeChild(s)})},e.exports=function(e){function t(n){return this instanceof t?(n&&!n.ajaxRequest&&(n.ajaxRequest=e),void s.bind(r,this)(n)):new t(n)}return t.prototype=r.prototype,t.prototype.constructor=t,t}},function(e,t,n){n(7),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var r=Object(this),o=r.length>>>0;if(0===o)return-1;var i=+t||0;if(Math.abs(i)===1/0&&(i=0),i>=o)return-1;for(n=Math.max(i>=0?i:o-Math.abs(i),0);n<o;){if(n in r&&r[n]===e)return n;n++}return-1}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)})},function(e,t,n){!function(){function e(e){this.message=e}var n=t,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",n.btoa||(n.btoa=function(t){for(var n,o,i=String(t),s=0,a=r,u="";i.charAt(0|s)||(a="=",s%1);u+=a.charAt(63&n>>8-s%1*8)){if(o=i.charCodeAt(s+=.75),o>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|o}return u}),n.atob||(n.atob=function(t){var n=String(t).replace(/=+$/,"");if(n.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var o,i,s=0,a=0,u="";i=n.charAt(a++);~i&&(o=s%4?64*o+i:i,s++%4)?u+=String.fromCharCode(255&o>>(-2*s&6)):0)i=r.indexOf(i);return u})}()},function(e,t,n){(function(t,n){/*!
	 *
	 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
	 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
	 *
	 * With parts by Tyler Close
	 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
	 * at http://www.opensource.org/licenses/mit-license.html
	 * Forked at ref_send.js version: 2009-05-11
	 *
	 * With parts by Mark Miller
	 * Copyright (C) 2011 Google Inc.
	 *
	 * Licensed under the Apache License, Version 2.0 (the "License");
	 * you may not use this file except in compliance with the License.
	 * You may obtain a copy of the License at
	 *
	 * http://www.apache.org/licenses/LICENSE-2.0
	 *
	 * Unless required by applicable law or agreed to in writing, software
	 * distributed under the License is distributed on an "AS IS" BASIS,
	 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	 * See the License for the specific language governing permissions and
	 * limitations under the License.
	 *
	 */
!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else{e.exports=t()}}(function(){"use strict";function e(e){return function(){return V.apply(e,arguments)}}function r(e){return e===Object(e)}function o(e){return"[object StopIteration]"===oe(e)||e instanceof X}function i(e,t){if(W&&t.stack&&"object"==typeof e&&null!==e&&e.stack&&e.stack.indexOf(ie)===-1){for(var n=[],r=t;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(e.stack);var o=n.join("\n"+ie+"\n");e.stack=s(o)}}function s(e){for(var t=e.split("\n"),n=[],r=0;r<t.length;++r){var o=t[r];c(o)||a(o)||!o||n.push(o)}return n.join("\n")}function a(e){return e.indexOf("(module.js:")!==-1||e.indexOf("(node.js:")!==-1}function u(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(e);return r?[r[1],Number(r[2])]:void 0}function c(e){var t=u(e);if(!t)return!1;var n=t[0],r=t[1];return n===B&&r>=J&&r<=pe}function p(){if(W)try{throw new Error}catch(e){var t=e.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],r=u(n);if(!r)return;return B=r[0],r[1]}}function l(e,t,n){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t+" is deprecated, use "+n+" instead.",new Error("").stack),e.apply(e,arguments)}}function f(e){return e instanceof v?e:k(e)?O(e):C(e)}function d(){function e(e){t=e,i.source=e,$(n,function(t,n){f.nextTick(function(){e.promiseDispatch.apply(e,n)})},void 0),n=void 0,r=void 0}var t,n=[],r=[],o=te(d.prototype),i=te(v.prototype);if(i.promiseDispatch=function(e,o,i){var s=Y(arguments);n?(n.push(s),"when"===o&&i[1]&&r.push(i[1])):f.nextTick(function(){t.promiseDispatch.apply(t,s)})},i.valueOf=function(){if(n)return i;var e=g(t);return w(e)&&(t=e),e},i.inspect=function(){return t?t.inspect():{state:"pending"}},f.longStackSupport&&W)try{throw new Error}catch(s){i.stack=s.stack.substring(s.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(n){t||e(f(n))},o.fulfill=function(n){t||e(C(n))},o.reject=function(n){t||e(E(n))},o.notify=function(e){t||$(r,function(t,n){f.nextTick(function(){n(e)})},void 0)},o}function h(e){if("function"!=typeof e)throw new TypeError("resolver must be a function.");var t=d();try{e(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}return t.promise}function m(e){return h(function(t,n){for(var r=0,o=e.length;r<o;r++)f(e[r]).then(t,n)})}function v(e,t,n){void 0===t&&(t=function(e){return E(new Error("Promise does not support operation: "+e))}),void 0===n&&(n=function(){return{state:"unknown"}});var r=te(v.prototype);if(r.promiseDispatch=function(n,o,i){var s;try{s=e[o]?e[o].apply(r,i):t.call(r,o,i)}catch(a){s=E(a)}n&&n(s)},r.inspect=n,n){var o=n();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var e=n();return"pending"===e.state||"rejected"===e.state?r:e.value}}return r}function y(e,t,n,r){return f(e).then(t,n,r)}function g(e){if(w(e)){var t=e.inspect();if("fulfilled"===t.state)return t.value}return e}function w(e){return e instanceof v}function k(e){return r(e)&&"function"==typeof e.then}function T(e){return w(e)&&"pending"===e.inspect().state}function _(e){return!w(e)||"fulfilled"===e.inspect().state}function x(e){return w(e)&&"rejected"===e.inspect().state}function A(){se.length=0,ae.length=0,ce||(ce=!0)}function b(e,n){ce&&("object"==typeof t&&"function"==typeof t.emit&&f.nextTick.runAfter(function(){Z(ae,e)!==-1&&(t.emit("unhandledRejection",n,e),ue.push(e))}),ae.push(e),n&&"undefined"!=typeof n.stack?se.push(n.stack):se.push("(no stack) "+n))}function S(e){if(ce){var n=Z(ae,e);n!==-1&&("object"==typeof t&&"function"==typeof t.emit&&f.nextTick.runAfter(function(){var r=Z(ue,e);r!==-1&&(t.emit("rejectionHandled",se[n],e),ue.splice(r,1))}),ae.splice(n,1),se.splice(n,1))}}function E(e){var t=v({when:function(t){return t&&S(this),t?t(e):this}},function(){return this},function(){return{state:"rejected",reason:e}});return b(t,e),t}function C(e){return v({when:function(){return e},get:function(t){return e[t]},set:function(t,n){e[t]=n},"delete":function(t){delete e[t]},post:function(t,n){return null===t||void 0===t?e.apply(void 0,n):e[t].apply(e,n)},apply:function(t,n){return e.apply(t,n)},keys:function(){return re(e)}},void 0,function(){return{state:"fulfilled",value:e}})}function O(e){var t=d();return f.nextTick(function(){try{e.then(t.resolve,t.reject,t.notify)}catch(n){t.reject(n)}}),t.promise}function R(e){return v({isDef:function(){}},function(t,n){return M(e,t,n)},function(){return f(e).inspect()})}function j(e,t,n){return f(e).spread(t,n)}function U(e){return function(){function t(e,t){var s;if("undefined"==typeof StopIteration){try{s=n[e](t)}catch(a){return E(a)}return s.done?f(s.value):y(s.value,r,i)}try{s=n[e](t)}catch(a){return o(a)?f(a.value):E(a)}return y(s,r,i)}var n=e.apply(this,arguments),r=t.bind(t,"next"),i=t.bind(t,"throw");return r()}}function I(e){f.done(f.async(e)())}function N(e){throw new X(e)}function P(e){return function(){return j([this,D(arguments)],function(t,n){return e.apply(t,n)})}}function M(e,t,n){return f(e).dispatch(t,n)}function D(e){return y(e,function(e){var t=0,n=d();return $(e,function(r,o,i){var s;w(o)&&"fulfilled"===(s=o.inspect()).state?e[i]=s.value:(++t,y(o,function(r){e[i]=r,0===--t&&n.resolve(e)},n.reject,function(e){n.notify({index:i,value:e})}))},void 0),0===t&&n.resolve(e),n.promise})}function q(e){if(0===e.length)return f.resolve();var t=f.defer(),n=0;return $(e,function(r,o,i){function s(e){t.resolve(e)}function a(){n--,0===n&&t.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function u(e){t.notify({index:i,value:e})}var c=e[i];n++,y(c,s,a,u)},void 0),t.promise}function L(e){return y(e,function(e){return e=ee(e,f),y(D(ee(e,function(e){return y(e,G,G)})),function(){return e})})}function H(e){return f(e).allSettled()}function F(e,t){return f(e).then(void 0,void 0,t)}function K(e,t){return f(e).nodeify(t)}var W=!1;try{throw new Error}catch(z){W=!!z.stack}var B,X,J=p(),G=function(){},Q=function(){function e(){for(var e,t;o.next;)o=o.next,e=o.task,o.task=void 0,t=o.domain,t&&(o.domain=void 0,t.enter()),r(e,t);for(;c.length;)e=c.pop(),r(e);s=!1}function r(t,n){try{t()}catch(r){if(u)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),r;setTimeout(function(){throw r},0)}n&&n.exit()}var o={task:void 0,next:null},i=o,s=!1,a=void 0,u=!1,c=[];if(Q=function(e){i=i.next={task:e,domain:u&&t.domain,next:null},s||(s=!0,a())},"object"==typeof t&&"[object process]"===t.toString()&&t.nextTick)u=!0,a=function(){t.nextTick(e)};else if("function"==typeof n)a="undefined"!=typeof window?n.bind(window,e):function(){n(e)};else if("undefined"!=typeof MessageChannel){var p=new MessageChannel;p.port1.onmessage=function(){a=l,p.port1.onmessage=e,e()};var l=function(){p.port2.postMessage(0)};a=function(){setTimeout(e,0),l()}}else a=function(){setTimeout(e,0)};return Q.runAfter=function(e){c.push(e),s||(s=!0,a())},Q}(),V=Function.call,Y=e(Array.prototype.slice),$=e(Array.prototype.reduce||function(e,t){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){t=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(t=e(t,this[n],n));return t}),Z=e(Array.prototype.indexOf||function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),ee=e(Array.prototype.map||function(e,t){var n=this,r=[];return $(n,function(o,i,s){r.push(e.call(t,i,s,n))},void 0),r}),te=Object.create||function(e){function t(){}return t.prototype=e,new t},ne=e(Object.prototype.hasOwnProperty),re=Object.keys||function(e){var t=[];for(var n in e)ne(e,n)&&t.push(n);return t},oe=e(Object.prototype.toString);X="undefined"!=typeof ReturnValue?ReturnValue:function(e){this.value=e};var ie="From previous event:";f.resolve=f,f.nextTick=Q,f.longStackSupport=!1,"object"==typeof t&&t&&t.env&&t.env.Q_DEBUG&&(f.longStackSupport=!0),f.defer=d,d.prototype.makeNodeResolver=function(){var e=this;return function(t,n){t?e.reject(t):arguments.length>2?e.resolve(Y(arguments,1)):e.resolve(n)}},f.Promise=h,f.promise=h,h.race=m,h.all=D,h.reject=E,h.resolve=f,f.passByCopy=function(e){return e},v.prototype.passByCopy=function(){return this},f.join=function(e,t){return f(e).join(t)},v.prototype.join=function(e){return f([this,e]).spread(function(e,t){if(e===t)return e;throw new Error("Can't join: not the same: "+e+" "+t)})},f.race=m,v.prototype.race=function(){return this.then(f.race)},f.makePromise=v,v.prototype.toString=function(){return"[object Promise]"},v.prototype.then=function(e,t,n){function r(t){try{return"function"==typeof e?e(t):t}catch(n){return E(n)}}function o(e){if("function"==typeof t){i(e,a);try{return t(e)}catch(n){return E(n)}}return E(e)}function s(e){return"function"==typeof n?n(e):e}var a=this,u=d(),c=!1;return f.nextTick(function(){a.promiseDispatch(function(e){c||(c=!0,u.resolve(r(e)))},"when",[function(e){c||(c=!0,u.resolve(o(e)))}])}),a.promiseDispatch(void 0,"when",[void 0,function(e){var t,n=!1;try{t=s(e)}catch(r){if(n=!0,!f.onerror)throw r;f.onerror(r)}n||u.notify(t)}]),u.promise},f.tap=function(e,t){return f(e).tap(t)},v.prototype.tap=function(e){return e=f(e),this.then(function(t){return e.fcall(t).thenResolve(t)})},f.when=y,v.prototype.thenResolve=function(e){return this.then(function(){return e})},f.thenResolve=function(e,t){return f(e).thenResolve(t)},v.prototype.thenReject=function(e){return this.then(function(){throw e})},f.thenReject=function(e,t){return f(e).thenReject(t)},f.nearer=g,f.isPromise=w,f.isPromiseAlike=k,f.isPending=T,v.prototype.isPending=function(){return"pending"===this.inspect().state},f.isFulfilled=_,v.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},f.isRejected=x,v.prototype.isRejected=function(){return"rejected"===this.inspect().state};var se=[],ae=[],ue=[],ce=!0;f.resetUnhandledRejections=A,f.getUnhandledReasons=function(){return se.slice()},f.stopUnhandledRejectionTracking=function(){A(),ce=!1},A(),f.reject=E,f.fulfill=C,f.master=R,f.spread=j,v.prototype.spread=function(e,t){return this.all().then(function(t){return e.apply(void 0,t)},t)},f.async=U,f.spawn=I,f["return"]=N,f.promised=P,f.dispatch=M,v.prototype.dispatch=function(e,t){var n=this,r=d();return f.nextTick(function(){n.promiseDispatch(r.resolve,e,t)}),r.promise},f.get=function(e,t){return f(e).dispatch("get",[t])},v.prototype.get=function(e){return this.dispatch("get",[e])},f.set=function(e,t,n){return f(e).dispatch("set",[t,n])},v.prototype.set=function(e,t){return this.dispatch("set",[e,t])},f.del=f["delete"]=function(e,t){return f(e).dispatch("delete",[t])},v.prototype.del=v.prototype["delete"]=function(e){return this.dispatch("delete",[e])},f.mapply=f.post=function(e,t,n){return f(e).dispatch("post",[t,n])},v.prototype.mapply=v.prototype.post=function(e,t){return this.dispatch("post",[e,t])},f.send=f.mcall=f.invoke=function(e,t){return f(e).dispatch("post",[t,Y(arguments,2)])},v.prototype.send=v.prototype.mcall=v.prototype.invoke=function(e){return this.dispatch("post",[e,Y(arguments,1)])},f.fapply=function(e,t){return f(e).dispatch("apply",[void 0,t])},v.prototype.fapply=function(e){return this.dispatch("apply",[void 0,e])},f["try"]=f.fcall=function(e){return f(e).dispatch("apply",[void 0,Y(arguments,1)])},v.prototype.fcall=function(){return this.dispatch("apply",[void 0,Y(arguments)])},f.fbind=function(e){var t=f(e),n=Y(arguments,1);return function(){return t.dispatch("apply",[this,n.concat(Y(arguments))])}},v.prototype.fbind=function(){var e=this,t=Y(arguments);return function(){return e.dispatch("apply",[this,t.concat(Y(arguments))])}},f.keys=function(e){return f(e).dispatch("keys",[])},v.prototype.keys=function(){return this.dispatch("keys",[])},f.all=D,v.prototype.all=function(){return D(this)},f.any=q,v.prototype.any=function(){return q(this)},f.allResolved=l(L,"allResolved","allSettled"),v.prototype.allResolved=function(){return L(this)},f.allSettled=H,v.prototype.allSettled=function(){return this.then(function(e){return D(ee(e,function(e){function t(){return e.inspect()}return e=f(e),e.then(t,t)}))})},f.fail=f["catch"]=function(e,t){return f(e).then(void 0,t)},v.prototype.fail=v.prototype["catch"]=function(e){return this.then(void 0,e)},f.progress=F,v.prototype.progress=function(e){return this.then(void 0,void 0,e)},f.fin=f["finally"]=function(e,t){return f(e)["finally"](t)},v.prototype.fin=v.prototype["finally"]=function(e){return e=f(e),this.then(function(t){return e.fcall().then(function(){return t})},function(t){return e.fcall().then(function(){throw t})})},f.done=function(e,t,n,r){return f(e).done(t,n,r)},v.prototype.done=function(e,n,r){var o=function(e){f.nextTick(function(){if(i(e,s),!f.onerror)throw e;f.onerror(e)})},s=e||n||r?this.then(e,n,r):this;"object"==typeof t&&t&&t.domain&&(o=t.domain.bind(o)),s.then(void 0,o)},f.timeout=function(e,t,n){return f(e).timeout(t,n)},v.prototype.timeout=function(e,t){var n=d(),r=setTimeout(function(){t&&"string"!=typeof t||(t=new Error(t||"Timed out after "+e+" ms"),t.code="ETIMEDOUT"),n.reject(t)},e);return this.then(function(e){clearTimeout(r),n.resolve(e)},function(e){clearTimeout(r),n.reject(e)},n.notify),n.promise},f.delay=function(e,t){return void 0===t&&(t=e,e=void 0),f(e).delay(t)},v.prototype.delay=function(e){return this.then(function(t){var n=d();return setTimeout(function(){n.resolve(t)},e),n.promise})},f.nfapply=function(e,t){return f(e).nfapply(t)},v.prototype.nfapply=function(e){var t=d(),n=Y(e);return n.push(t.makeNodeResolver()),this.fapply(n).fail(t.reject),t.promise},f.nfcall=function(e){var t=Y(arguments,1);return f(e).nfapply(t)},v.prototype.nfcall=function(){var e=Y(arguments),t=d();return e.push(t.makeNodeResolver()),this.fapply(e).fail(t.reject),t.promise},f.nfbind=f.denodeify=function(e){var t=Y(arguments,1);return function(){var n=t.concat(Y(arguments)),r=d();return n.push(r.makeNodeResolver()),f(e).fapply(n).fail(r.reject),r.promise}},v.prototype.nfbind=v.prototype.denodeify=function(){var e=Y(arguments);return e.unshift(this),f.denodeify.apply(void 0,e)},f.nbind=function(e,t){var n=Y(arguments,2);return function(){function r(){return e.apply(t,arguments)}var o=n.concat(Y(arguments)),i=d();return o.push(i.makeNodeResolver()),f(r).fapply(o).fail(i.reject),i.promise}},v.prototype.nbind=function(){var e=Y(arguments,0);return e.unshift(this),f.nbind.apply(void 0,e)},f.nmapply=f.npost=function(e,t,n){return f(e).npost(t,n)},v.prototype.nmapply=v.prototype.npost=function(e,t){var n=Y(t||[]),r=d();return n.push(r.makeNodeResolver()),this.dispatch("post",[e,n]).fail(r.reject),r.promise},f.nsend=f.nmcall=f.ninvoke=function(e,t){var n=Y(arguments,2),r=d();return n.push(r.makeNodeResolver()),f(e).dispatch("post",[t,n]).fail(r.reject),r.promise},v.prototype.nsend=v.prototype.nmcall=v.prototype.ninvoke=function(e){var t=Y(arguments,1),n=d();return t.push(n.makeNodeResolver()),this.dispatch("post",[e,t]).fail(n.reject),n.promise},f.nodeify=K,v.prototype.nodeify=function(e){return e?void this.then(function(t){f.nextTick(function(){e(null,t)})},function(t){f.nextTick(function(){e(t)})}):this},f.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var pe=p();return f})}).call(t,n(9),n(10).setImmediate)},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function o(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function i(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function s(){m&&d&&(m=!1,d.length?h=d.concat(h):v=-1,h.length&&a())}function a(){if(!m){var e=o(s);m=!0;for(var t=h.length;t;){for(d=h,h=[];++v<t;)d&&d[v].run();v=-1,t=h.length}d=null,m=!1,i(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var p,l,f=e.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var d,h=[],m=!1,v=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new u(e,t)),1!==h.length||m||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(e){return[]},f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){(function(e,r){function o(e,t){this._id=e,this._clearFn=t}var i=n(9).nextTick,s=Function.prototype.apply,a=Array.prototype.slice,u={},c=0;t.setTimeout=function(){return new o(s.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(s.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},t.setImmediate="function"==typeof e?e:function(e){var n=c++,r=!(arguments.length<2)&&a.call(arguments,1);return u[n]=!0,i(function(){u[n]&&(r?e.apply(null,r):e.call(null),t.clearImmediate(n))}),n},t.clearImmediate="function"==typeof r?r:function(e){delete u[e]}}).call(t,n(10).setImmediate,n(10).clearImmediate)},function(e,t,n){function r(e){return!(!e||!e.accessToken&&!e.idToken||!Array.isArray(e.scopes))}function o(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent("on"+t,n)}function i(e,t,n){e.removeEventListener?e.removeEventListener(t,n):e.detachEvent("on"+t,n)}function s(e){var t=document.createElement("iframe");return t.style.display="none",t.src=e,document.body.appendChild(t)}function a(e,t){var n=t.popupTitle||"External Identity Provider User Authentication",r="toolbar=no, scrollbars=yes, resizable=yes, top=100, left=500, width=600, height=600";if(h.isIE11OrLess()){var o=window.open("/",n,r);return o.location.href=e,o}return window.open(e,n,r)}function u(e,t){return d.get(e,(t||e.options.url)+"/.well-known/openid-configuration",{cacheResponse:!0})}function c(e,t,n){return u(e,t).then(function(t){var r=t.jwks_uri,o=y.getStorage(),i=o[r];if(i&&Date.now()/1e3<i.expiresAt){var s=h.find(i.response.keys,{kid:n});if(s)return s}return y.clearStorage(r),d.get(e,r,{cacheResponse:!0}).then(function(e){var t=h.find(e.keys,{kid:n});if(t)return t;throw new v("The key id, "+n+", was not found in the server's keys")})})}function p(e,t,n){var r=n.clientId,o=n.issuer,i=n.nonce;if(!t||!o||!r)throw new v("The jwt, iss, and aud arguments are all required");if(i&&t.nonce!==i)throw new v("OAuth flow response nonce doesn't match request nonce");var s=Math.floor((new Date).getTime()/1e3);if(t.iss!==o)throw new v("The issuer ["+t.iss+"] does not match ["+o+"]");if(t.aud!==r)throw new v("The audience ["+t.aud+"] does not match ["+r+"]");if(t.iat>t.exp)throw new v("The JWT expired before it was issued");if(s-e.options.maxClockSkew>t.exp)throw new v("The JWT expired and is no longer valid");if(t.iat>s+e.options.maxClockSkew)throw new v("The JWT was issued in the future")}function l(e,t,n){n=n||{};var r=h.removeTrailingSlash(n.authorizeUrl)||e.options.authorizeUrl,o=h.removeTrailingSlash(n.issuer)||e.options.issuer,i=h.removeTrailingSlash(n.userinfoUrl)||e.options.userinfoUrl;if(o&&!/^https?:/.test(o)&&(o=e.options.url+"/oauth2/"+o),!o&&r&&t.responseType.indexOf("id_token")!==-1)throw new v("Cannot request idToken with an authorizeUrl without an issuer");if(!o&&t.responseType.indexOf("token")!==-1){if(r&&!i)throw new v("Cannot request accessToken with an authorizeUrl without an issuer or userinfoUrl");if(i&&!r)throw new v("Cannot request token with an userinfoUrl without an issuer or authorizeUrl")}var s=new RegExp("^https?://.*?/oauth2/.+");return o=o||e.options.url,s.test(o)?(r=r||o+"/v1/authorize",i=i||o+"/v1/userinfo"):(r=r||o+"/oauth2/v1/authorize",i=i||o+"/oauth2/v1/userinfo"),{issuer:o,authorizeUrl:r,userinfoUrl:i}}function f(e){for(var t,n=/\+/g,r=/([^&=]+)=?([^&]*)/g,o=e.substring(1),i={};;){if(t=r.exec(o),!t)break;var s=t[1],a=t[2];"id_token"===s||"access_token"===s||"code"===s?i[s]=a:i[s]=decodeURIComponent(a.replace(n," "))}return i}var d=n(12),h=n(13),m=n(16),v=n(18),y=m.getHttpCache();e.exports={getWellKnown:u,getKey:c,validateClaims:p,getOAuthUrls:l,loadFrame:s,loadPopup:a,hashToObject:f,isToken:r,addListener:o,removeListener:i}},function(e,t,n){function r(e,t){t=t||{};var n=t.url,r=t.method,o=t.args,i=t.saveAuthnState,f=t.accessToken,d=u.getHttpCache();if(t.cacheResponse){var h=d.getStorage(),m=h[n];if(m&&Date.now()/1e3<m.expiresAt)return c.resolve(m.response)}var v={Accept:"application/json","Content-Type":"application/json","X-Okta-User-Agent-Extended":e.userAgent};s.extend(v,e.options.headers,t.headers),f&&s.isString(f)&&(v.Authorization="Bearer "+f);var y,g,w={headers:v,data:o||void 0};return new c(e.options.ajaxRequest(r,n,w)).then(function(e){return g=e.responseText,g&&s.isString(g)&&(g=JSON.parse(g)),i&&(g.stateToken||a.deleteCookie(l.STATE_TOKEN_COOKIE_NAME)),g&&g.stateToken&&g.expiresAt&&a.setCookie(l.STATE_TOKEN_COOKIE_NAME,g.stateToken,g.expiresAt),g&&t.cacheResponse&&d.updateStorage(n,{expiresAt:Math.floor(Date.now()/1e3)+l.DEFAULT_CACHE_DURATION,response:g}),g}).fail(function(t){var n=t.responseText||{};if(s.isString(n))try{n=JSON.parse(n)}catch(r){n={errorSummary:"Unknown error"}}throw t.status>=500&&(n.errorSummary="Unknown error"),e.options.transformErrorXHR&&(t=e.options.transformErrorXHR(s.clone(t))),y=new p(n,t),"E0000011"===y.errorCode&&a.deleteCookie(l.STATE_TOKEN_COOKIE_NAME),y})}function o(e,t,n){t=s.isAbsoluteUrl(t)?t:e.options.url+t;var o={url:t,method:"GET"};return s.extend(o,n),r(e,o)}function i(e,t,n,o){t=s.isAbsoluteUrl(t)?t:e.options.url+t;var i={url:t,method:"POST",args:n,saveAuthnState:!0};return s.extend(i,o),r(e,i)}var s=n(13),a=n(14),u=n(16),c=n(8),p=n(20),l=n(19);e.exports={get:o,post:i,httpRequest:r}},function(e,t){var n=e.exports;n.base64UrlToBase64=function(e){return e.replace(/-/g,"+").replace(/_/g,"/")},n.base64UrlToString=function(e){var t=n.base64UrlToBase64(e);switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Not a valid Base64Url"}var r=atob(t);try{return decodeURIComponent(escape(r))}catch(o){return r}},n.stringToBuffer=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},n.base64UrlDecode=function(e){return atob(n.base64UrlToBase64(e))},n.bind=function(e,t){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return r=n.concat(r),e.apply(t,r)}},n.isAbsoluteUrl=function(e){return/^(?:[a-z]+:)?\/\//i.test(e)},n.isString=function(e){return"[object String]"===Object.prototype.toString.call(e)},n.isObject=function(e){return"[object Object]"===Object.prototype.toString.call(e)},n.isNumber=function(e){return"[object Number]"===Object.prototype.toString.call(e)},n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.isoToUTCString=function(e){var t=e.match(/\d+/g),n=Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5]),r=new Date(n);return r.toUTCString()},n.toQueryParams=function(e){var t=[];if(null!==e)for(var n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&null!==e[n]&&t.push(n+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""},n.genRandomString=function(e){for(var t="abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n="",r=0,o=t.length;r<e;++r)n+=t[Math.floor(Math.random()*o)];return n},n.extend=function(){var e=arguments[0],t=[].slice.call(arguments,1);t.forEach(function(t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})},n.removeNils=function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];null!==r&&void 0!==r&&(t[n]=r)}return t},n.clone=function(e){if(e){var t=JSON.stringify(e);if(t)return JSON.parse(t)}return e},n.omit=function(e){var t=Array.prototype.slice.call(arguments,1),r={};for(var o in e)e.hasOwnProperty(o)&&t.indexOf(o)==-1&&(r[o]=e[o]);return n.clone(r)},n.find=function(e,t){for(var n=e.length;n--;){var r=e[n],o=!0;for(var i in t)if(t.hasOwnProperty(i)&&r[i]!==t[i]){o=!1;break}if(o)return r}},n.getLink=function(e,t,r){if(e&&e._links){var o=n.clone(e._links[t]);return o&&o.name&&r?o.name===r?o:void 0:o}},n.getNativeConsole=function(){return window.console},n.getConsole=function(){var e=n.getNativeConsole();return e&&e.log?e:{log:function(){}}},n.warn=function(e){n.getConsole().log("[okta-auth-sdk] WARN: "+e)},n.deprecate=function(e){n.getConsole().log("[okta-auth-sdk] DEPRECATION: "+e)},n.deprecateWrap=function(e,t){return function(){return n.deprecate(e),t.apply(null,arguments)}},n.removeTrailingSlash=function(e){if(e){var t=e.replace(/^\s+|\s+$/gm,"");return"/"===t.slice(-1)?t.slice(0,-1):t}},n.isIE11OrLess=function(){return!!document.documentMode&&document.documentMode<=11}},function(e,t,n){function r(e,t,n){var r={path:"/"};return Date.parse(n)&&(r.expires=new Date(n)),s.set(e,t,r),o(e)}function o(e){return s.get(e)}function i(e){return s.remove(e,{path:"/"})}var s=n(15);e.exports={setCookie:r,getCookie:o,deleteCookie:i}},function(e,t,n){var r,o;!function(i){var s=!1;if(r=i,o="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==o&&(e.exports=o)),s=!0,e.exports=i(),s=!0,!s){var a=window.Cookies,u=window.Cookies=i();u.noConflict=function(){return window.Cookies=a,u}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(n){function r(t,o,i){var s;if("undefined"!=typeof document){if(arguments.length>1){if(i=e({path:"/"},r.defaults,i),"number"==typeof i.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*i.expires),i.expires=a}i.expires=i.expires?i.expires.toUTCString():"";try{s=JSON.stringify(o),/^[\{\[]/.test(s)&&(o=s)}catch(u){}o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape);var c="";for(var p in i)i[p]&&(c+="; "+p,i[p]!==!0&&(c+="="+i[p]));return document.cookie=t+"="+o+c}t||(s={});for(var l=document.cookie?document.cookie.split("; "):[],f=/(%[0-9A-Z]{2})+/g,d=0;d<l.length;d++){var h=l[d].split("="),m=h.slice(1).join("=");this.json||'"'!==m.charAt(0)||(m=m.slice(1,-1));try{var v=h[0].replace(f,decodeURIComponent);if(m=n.read?n.read(m,v):n(m,v)||m.replace(f,decodeURIComponent),this.json)try{m=JSON.parse(m)}catch(u){}if(t===v){s=m;break}t||(s[v]=m)}catch(u){}}return s}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}return t(function(){})})},function(e,t,n){var r=n(14),o=n(17),i=n(19),s={};s.browserHasLocalStorage=function(){try{var e=s.getLocalStorage();return s.testStorage(e)}catch(t){return!1}},s.browserHasSessionStorage=function(){try{var e=s.getSessionStorage();return s.testStorage(e)}catch(t){return!1}},s.getHttpCache=function(){return s.browserHasLocalStorage()?o(s.getLocalStorage(),i.CACHE_STORAGE_NAME):s.browserHasSessionStorage()?o(s.getSessionStorage(),i.CACHE_STORAGE_NAME):o(s.getCookieStorage(),i.CACHE_STORAGE_NAME)},s.getLocalStorage=function(){return localStorage},s.getSessionStorage=function(){return sessionStorage},s.getCookieStorage=function(){return{getItem:r.getCookie,setItem:function(e,t){r.setCookie(e,t,"2038-01-19T03:14:07.000Z")}}},s.testStorage=function(e){var t="okta-test-storage";try{return e.setItem(t,t),e.removeItem(t),!0}catch(n){return!1}},e.exports=s},function(e,t,n){function r(e,t){function n(){var n=e.getItem(t);n=n||"{}";try{return JSON.parse(n)}catch(r){throw new o("Unable to parse storage string: "+t)}}function r(n){try{var r=JSON.stringify(n);e.setItem(t,r)}catch(i){throw new o("Unable to set storage: "+t)}}function i(e){e||r({});var t=n();delete t[e],r(t)}function s(e,t){var o=n();o[e]=t,r(o)}return{getStorage:n,setStorage:r,clearStorage:i,updateStorage:s}}var o=n(18);e.exports=r},function(e,t){function n(e,t){this.name="AuthSdkError",this.message=e,this.errorCode="INTERNAL",this.errorSummary=e,this.errorLink="INTERNAL",this.errorId="INTERNAL",this.errorCauses=[],t&&(this.xhr=t)}n.prototype=new Error,e.exports=n},function(e,t){e.exports={STATE_TOKEN_COOKIE_NAME:"oktaStateToken",DEFAULT_POLLING_DELAY:500,DEFAULT_MAX_CLOCK_SKEW:300,DEFAULT_CACHE_DURATION:86400,FRAME_ID:"okta-oauth-helper-frame",REDIRECT_OAUTH_PARAMS_COOKIE_NAME:"okta-oauth-redirect-params",REDIRECT_STATE_COOKIE_NAME:"okta-oauth-state",REDIRECT_NONCE_COOKIE_NAME:"okta-oauth-nonce",TOKEN_STORAGE_NAME:"okta-token-storage",CACHE_STORAGE_NAME:"okta-cache-storage",SDK_VERSION:"2.2.0"}},function(e,t){function n(e,t){this.name="AuthApiError",this.message=e.errorSummary,this.errorSummary=e.errorSummary,this.errorCode=e.errorCode,this.errorLink=e.errorLink,this.errorId=e.errorId,this.errorCauses=e.errorCauses,t&&(this.xhr=t)}n.prototype=new Error,e.exports=n},function(e,t,n){function r(e,t){var n={};return m.extend(n,t),!n.stateToken&&e.stateToken&&(n.stateToken=e.stateToken),n}function o(e){return r(e)}function i(e,t){return t=r(e,t),h.post(e,e.options.url+"/api/v1/authn",t)}function s(e,t){if(!t||!t.stateToken){var n=e.tx.exists._getCookie(w.STATE_TOKEN_COOKIE_NAME);if(!n)return v.reject(new y("No transaction to resume"));t={stateToken:n}}return e.tx.status(t).then(function(t){return new d(e,t)})}function a(e){return!!e.tx.exists._getCookie(w.STATE_TOKEN_COOKIE_NAME)}function u(e,t,n,r){return h.post(e,t,n,r).then(function(t){return new d(e,t)})}function c(e,t,n){return function(r){function i(){var n={};if("function"==typeof u)try{n.autoPush=!!u()}catch(r){return v.reject(new y("AutoPush resulted in an error."))}else void 0!==u&&null!==u&&(n.autoPush=!!u);if("function"==typeof a)try{n.rememberDevice=!!a()}catch(r){return v.reject(new y("RememberDevice resulted in an error."))}else void 0!==a&&null!==a&&(n.rememberDevice=!!a);var i=c.href+m.toQueryParams(n);return h.post(e,i,o(t),{saveAuthnState:!1})}var s,a,u;m.isNumber(r)?s=r:m.isObject(r)&&(s=r.delay,a=r.rememberDevice,u=r.autoPush),s||0===s||(s=w.DEFAULT_POLLING_DELAY);var c=m.getLink(t,"next","poll");n.isPolling=!0;var p=0,l=function(){return n.isPolling?i().then(function(t){if(p=0,t.factorResult&&"WAITING"===t.factorResult){if(!n.isPolling)throw new g;return v.delay(s).then(l)}return n.isPolling=!1,new d(e,t)}).fail(function(e){if(e.xhr&&(0===e.xhr.status||429===e.xhr.status)&&p<=4){var t=1e3*Math.pow(2,p);return p++,v.delay(t).then(l)}throw e}):v.reject(new g)};return l().fail(function(e){throw n.isPolling=!1,e})}}function p(e,t,n,o,i){if(Array.isArray(o))return function(r,s){if(!r)throw new y("Must provide a link name");var a=m.find(o,{name:r});if(!a)throw new y("No link found for that name");return p(e,t,n,a,i)(s)};if(o.hints&&o.hints.allow&&1===o.hints.allow.length){var s=o.hints.allow[0];switch(s){case"GET":return function(){return h.get(e,o.href)};case"POST":return function(s){i&&i.isPolling&&(i.isPolling=!1);var a=r(t,s);"MFA_ENROLL"===t.status&&m.extend(a,{factorType:n.factorType,
provider:n.provider});var c={},p=a.autoPush;if(void 0!==p){if("function"==typeof p)try{c.autoPush=!!p()}catch(l){return v.reject(new y("AutoPush resulted in an error."))}else null!==p&&(c.autoPush=!!p);a=m.omit(a,"autoPush")}var f=a.rememberDevice;if(void 0!==f){if("function"==typeof f)try{c.rememberDevice=!!f()}catch(l){return v.reject(new y("RememberDevice resulted in an error."))}else null!==f&&(c.rememberDevice=!!f);a=m.omit(a,"rememberDevice")}else a.profile&&void 0!==a.profile.updatePhone&&(a.profile.updatePhone&&(c.updatePhone=!0),a.profile=m.omit(a.profile,"updatePhone"));var d=o.href+m.toQueryParams(c);return u(e,d,a)}}}}function l(e,t,n,r){var o={};for(var i in n._links)if(n._links.hasOwnProperty(i)){var s=n._links[i];if("next"===i&&(i=s.name),s.type)o[i]=s;else switch(i){case"poll":o.poll=c(e,t,r);break;default:var a=p(e,t,n,s,r);a&&(o[i]=a)}}return o}function f(e,t,n,r){if(n=n||t,n=m.clone(n),Array.isArray(n)){for(var o=[],i=0,s=n.length;i<s;i++)o.push(f(e,t,n[i],r));return o}var a=n._embedded||{};for(var u in a)a.hasOwnProperty(u)&&(m.isObject(a[u])||Array.isArray(a[u]))&&(a[u]=f(e,t,a[u],r));var c=l(e,t,n,r);return m.extend(a,c),n=m.omit(n,"_embedded","_links"),m.extend(n,a),n}function d(e,t){t&&(this.data=t,m.extend(this,f(e,t,t,{})),delete this.stateToken,"RECOVERY_CHALLENGE"!==t.status||t._links||(this.cancel=function(){return new v(new d(e))}))}var h=n(12),m=n(13),v=n(8),y=n(18),g=n(22),w=n(19);e.exports={transactionStatus:i,resumeTransaction:s,transactionExists:a,postToTransaction:u}},function(e,t){function n(){this.name="AuthPollStopError",this.message="The poll was stopped by the sdk"}n.prototype=new Error,e.exports=n},function(e,t,n){function r(e){return e.session.get().then(function(e){return"ACTIVE"===e.status}).fail(function(){return!1})}function o(e){return c.get(e,"/api/v1/sessions/me").then(function(t){var n=u.omit(t,"_links");return n.refresh=function(){return c.post(e,u.getLink(t,"refresh").href)},n.user=function(){return c.get(e,u.getLink(t,"user").href)},n}).fail(function(){return{status:"INACTIVE"}})}function i(e){return c.httpRequest(e,{url:e.options.url+"/api/v1/sessions/me",method:"DELETE"})}function s(e){return c.post(e,"/api/v1/sessions/me/lifecycle/refresh")}function a(e,t,n){n=n||window.location.href,window.location=e.options.url+"/login/sessionCookieRedirect"+u.toQueryParams({checkAccountSetupComplete:!0,token:t,redirectUrl:n})}var u=n(13),c=n(12);e.exports={sessionExists:r,getSession:o,closeSession:i,refreshSession:s,setCookieAndRedirect:a}},function(e,t,n){function r(e){var t,n=e.split(".");try{t={header:JSON.parse(k.base64UrlToString(n[0])),payload:JSON.parse(k.base64UrlToString(n[1])),signature:n[2]}}catch(r){throw new A("Malformed token")}return t}function o(e,t,n){return(new _).then(function(){if(!t||!t.idToken)throw new A("Only idTokens may be verified");var o=r(t.idToken),i={clientId:e.options.clientId,issuer:e.options.issuer||e.options.url,ignoreSignature:e.options.ignoreSignature};return k.extend(i,n),T.validateClaims(e,o.payload,i),1!=i.ignoreSignature&&e.features.isTokenVerifySupported()?T.getKey(e,t.issuer,o.header.kid).then(function(e){return x.verifyToken(t.idToken,e)}).then(function(e){if(!e)throw new A("The token signature is not valid");return t}):t})}function i(e,t,n){function r(t){!t.data||t.origin!==e.options.url||t.data&&k.isString(n)&&t.data.state!==n||o.resolve(t.data)}var o=_.defer();return T.addListener(window,"message",r),o.promise.timeout(t||12e4,new A("OAuth flow timed out")).fin(function(){T.removeListener(window,"message",r)})}function s(e,t,n){function r(){try{t&&t.location&&t.location.hash?o.resolve(T.hashToObject(t.location.hash)):t&&!t.closed&&setTimeout(r,500)}catch(e){setTimeout(r,500)}}var o=_.defer();return r(),o.promise.timeout(n||12e4,new A("OAuth flow timed out"))}function a(e,t,n,r){r=r||{};var i=t.responseType,s=k.clone(t.scopes),a=t.clientId||e.options.clientId;return(new _).then(function(){if(n.error||n.error_description)throw new b(n.error,n.error_description);if(n.state!==t.state)throw new A("OAuth flow response state doesn't match request state");var i={};if(n.access_token&&(i.token={accessToken:n.access_token,expiresAt:Number(n.expires_in)+Math.floor(Date.now()/1e3),tokenType:n.token_type,scopes:s,authorizeUrl:r.authorizeUrl,userinfoUrl:r.userinfoUrl}),n.code&&(i.code={authorizationCode:n.code}),n.id_token){var u=e.token.decode(n.id_token),c={idToken:n.id_token,claims:u.payload,expiresAt:u.payload.exp,scopes:s,authorizeUrl:r.authorizeUrl,issuer:r.issuer,clientId:a},p={clientId:a,issuer:r.issuer,nonce:t.nonce,ignoreSignature:t.ignoreSignature};return o(e,c,p).then(function(){return i.id_token=c,i})}return i}).then(function(e){if(!Array.isArray(i))return e[i];if(!e.token&&!e.id_token)throw new A("Unable to parse OAuth flow response");return i.map(function(t){return e[t]})})}function u(e,t){t=k.clone(t)||{};var n={clientId:e.options.clientId,redirectUri:e.options.redirectUri||window.location.href,responseType:"id_token",responseMode:"okta_post_message",state:k.genRandomString(64),nonce:k.genRandomString(64),scopes:["openid","email"],ignoreSignature:e.options.ignoreSignature};return k.extend(n,t),n}function c(e){if(!e.clientId)throw new A("A clientId must be specified in the OktaAuth constructor to get a token");if(k.isString(e.responseType)&&e.responseType.indexOf(" ")!==-1)throw new A("Multiple OAuth responseTypes must be defined as an array");var t=k.removeNils({client_id:e.clientId,redirect_uri:e.redirectUri,response_type:e.responseType,response_mode:e.responseMode,state:e.state,nonce:e.nonce,prompt:e.prompt,display:e.display,sessionToken:e.sessionToken,idp:e.idp,max_age:e.maxAge});if(Array.isArray(t.response_type)&&(t.response_type=t.response_type.join(" ")),e.responseType.indexOf("id_token")!==-1&&e.scopes.indexOf("openid")===-1)throw new A("openid scope must be specified in the scopes argument when requesting an id_token");return t.scope=e.scopes.join(" "),t}function p(e){var t=c(e);return k.toQueryParams(t)}function l(e,t,n){function r(e){var t=/^(https?\:\/\/)?([^:\/?#]*(?:\:[0-9]+)?)/;return t.exec(e)[0]}function o(e){e.closed&&C.reject(new A("Unable to parse OAuth flow response"))}t=t||{},n=n||{};var c=u(e,t),l={prompt:"none",responseMode:"okta_post_message",display:null},f={display:"popup"};t.sessionToken?k.extend(c,l):t.idp&&k.extend(c,f);var d,h;try{h=T.getOAuthUrls(e,c,n),d=h.authorizeUrl+p(c)}catch(m){return _.reject(m)}var v;switch(v=c.sessionToken||null===c.display?"IFRAME":"popup"===c.display?"POPUP":"IMPLICIT"){case"IFRAME":var y=i(e,n.timeout,c.state),g=T.loadFrame(d);return y.then(function(t){return a(e,c,t,h)}).fin(function(){document.body.contains(g)&&g.parentElement.removeChild(g)});case"POPUP":var w;if("okta_post_message"===c.responseMode){if(!e.features.isPopupPostMessageSupported())return _.reject(new A("This browser doesn't have full postMessage support"));w=i(e,n.timeout,c.state)}var x={popupTitle:n.popupTitle},b=T.loadPopup(d,x);if("fragment"===c.responseMode){var S=r(e.idToken.authorize._getLocationHref()),E=r(c.redirectUri);if(S!==E)return _.reject(new A("Using fragment, the redirectUri origin ("+E+") must match the origin of this page ("+S+")"));w=s(e,b,n.timeout)}var C=_.defer(),O=setInterval(function(){o(b)},500);return w.then(function(e){C.resolve(e)}).fail(function(e){C.reject(e)}),C.promise.then(function(t){return a(e,c,t,h)}).fin(function(){b.closed||(clearInterval(O),b.close())});default:return _.reject(new A("The full page redirect flow is not supported"))}}function f(e,t,n){var r=k.clone(t)||{};return k.extend(r,{prompt:"none",responseMode:"okta_post_message",display:null}),l(e,r,n)}function d(e,t,n){var r=k.clone(t)||{};return k.extend(r,{display:"popup"}),l(e,r,n)}function h(e,t,n){t=k.clone(t)||{};var r=u(e,t);if(!t.responseMode){var o=r.responseType;o.indexOf("code")!==-1&&(k.isString(o)||Array.isArray(o)&&1===o.length)?k.extend(r,{responseMode:"query"}):k.extend(r,{responseMode:"fragment"})}var i=T.getOAuthUrls(e,r,n),s=i.authorizeUrl+p(r);E.setCookie(S.REDIRECT_OAUTH_PARAMS_COOKIE_NAME,JSON.stringify({responseType:r.responseType,state:r.state,nonce:r.nonce,scopes:r.scopes,clientId:r.clientId,urls:i,ignoreSignature:r.ignoreSignature})),E.setCookie(S.REDIRECT_NONCE_COOKIE_NAME,r.nonce),E.setCookie(S.REDIRECT_STATE_COOKIE_NAME,r.state),e.token.getWithRedirect._setLocation(s)}function m(e,t){if(!T.isToken(t))return _.reject(new A("Renew must be passed a token with an array of scopes and an accessToken or idToken"));var n;return n=t.accessToken?"token":"id_token",e.token.getWithoutPrompt({responseType:n,scopes:t.scopes},{authorizeUrl:t.authorizeUrl,userinfoUrl:t.userinfoUrl,issuer:t.issuer})}function v(e){var t=e.token.parseFromUrl._getHistory(),n=e.token.parseFromUrl._getDocument(),r=e.token.parseFromUrl._getLocation();t&&t.replaceState?t.replaceState(null,n.title,r.pathname+r.search):r.hash=""}function y(e,t){var n=e.token.parseFromUrl._getLocation(),r=n.hash;if(t&&(r=t.substring(t.indexOf("#"))),!r)return _.reject(new A("Unable to parse a token from the url"));var o=E.getCookie(S.REDIRECT_OAUTH_PARAMS_COOKIE_NAME);if(!o)return _.reject(new A("Unable to retrieve OAuth redirect params cookie"));try{var i=JSON.parse(o),s=i.urls;delete i.urls,E.deleteCookie(S.REDIRECT_OAUTH_PARAMS_COOKIE_NAME)}catch(u){return _.reject(new A("Unable to parse the "+S.REDIRECT_OAUTH_PARAMS_COOKIE_NAME+" cookie: "+u.message))}return _.resolve(T.hashToObject(r)).then(function(n){return t||v(e),a(e,i,n,s)})}function g(e,t){return t&&(T.isToken(t)||t.accessToken||t.userinfoUrl)?w.httpRequest(e,{url:t.userinfoUrl,method:"GET",accessToken:t.accessToken}).fail(function(e){if(e.xhr&&(401===e.xhr.status||403===e.xhr.status)){var t=e.xhr.getResponseHeader("WWW-Authenticate");if(t){var n=t.match(/error="(.*?)"/)||[],r=t.match(/error_description="(.*?)"/)||[],o=n[1],i=r[1];o&&i&&(e=new b(o,i))}}throw e}):_.reject(new A("getUserInfo requires an access token object"))}var w=n(12),k=n(13),T=n(11),_=n(8),x=n(25),A=n(18),b=n(26),S=n(19),E=n(14);e.exports={getToken:l,getWithoutPrompt:f,getWithPopup:d,getWithRedirect:h,parseFromUrl:y,decodeToken:r,renewToken:m,getUserInfo:g,verifyToken:o}},function(e,t,n){function r(e,t){t=o.clone(t);var n="jwk",r={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=!0,s=["verify"];return delete t.use,crypto.subtle.importKey(n,t,r,i,s).then(function(t){var n=e.split("."),i=o.stringToBuffer(n[0]+"."+n[1]),s=o.base64UrlDecode(n[2]),a=o.stringToBuffer(s);return crypto.subtle.verify(r,t,a,i)})}var o=n(13);e.exports={verifyToken:r}},function(e,t){function n(e,t){this.name="OAuthError",this.message=t,this.errorCode=e,this.errorSummary=t}n.prototype=new Error,e.exports=n},function(e,t,n){function r(e,t,n){e.emitter.emit("expired",t,n)}function o(e,t){e.emitter.emit("error",t)}function i(e,t){clearTimeout(e.expireTimeouts[t]),delete e.expireTimeouts[t],delete e.renewPromise[t]}function s(e){var t=e.expireTimeouts;for(var n in t)t.hasOwnProperty(n)&&i(e,n)}function a(e,t,n,o){var s=1e3*e.options.maxClockSkew,a=1e3*o.expiresAt-(Date.now()-s);i(t,n);var u=setTimeout(function(){r(t,n,o)},a);t.expireTimeouts[n]=u}function u(e,t,n){try{var r=n.getStorage()}catch(i){return void o(t,i)}for(var s in r)if(r.hasOwnProperty(s)){var u=r[s];a(e,t,s,u)}}function c(e,t,n,r,o){var i=n.getStorage();if(!v.isObject(o)||!o.scopes||!o.expiresAt&&0!==o.expiresAt||!o.idToken&&!o.accessToken)throw new y("Token must be an Object with scopes, expiresAt, and an idToken or accessToken properties");i[r]=o,n.setStorage(i),a(e,t,r,o)}function p(e,t){var n=e.getStorage();return n[t]}function l(e,t,n,r){return w.Promise(function(o){var i=p(n,r),s=1e3*e.options.maxClockSkew;if(!i||1e3*i.expiresAt-s>Date.now())return o(i);var a=t.autoRenew?d(e,t,n,r):f(t,n,r);return o(a)})}function f(e,t,n){i(e,n);var r=t.getStorage();delete r[n],t.setStorage(r)}function d(e,t,n,r){try{var s=p(n,r);if(!s)throw new y("The tokenManager has no token for the key: "+r)}catch(a){return w.reject(a)}return i(t,r),t.renewPromise[r]||(t.renewPromise[r]=e.token.renew(s).then(function(o){if(p(n,r))return c(e,t,n,r,o),t.emitter.emit("renewed",r,o,s),delete t.renewPromise[r],o}).fail(function(e){throw"OAuthError"===e.name&&(f(t,n,r),o(t,e)),e})),t.renewPromise[r]}function h(e,t){s(e),t.clearStorage()}function m(e,t){t=t||{},t.storage=t.storage||"localStorage",t.autoRenew||t.autoRenew===!1||(t.autoRenew=!0),"localStorage"!==t.storage||g.browserHasLocalStorage()||(v.warn("This browser doesn't support localStorage. Switching to sessionStorage."),t.storage="sessionStorage"),"sessionStorage"!==t.storage||g.browserHasSessionStorage()||(v.warn("This browser doesn't support sessionStorage. Switching to cookie-based storage."),t.storage="cookie");var n;switch(t.storage){case"localStorage":n=_(localStorage,T.TOKEN_STORAGE_NAME);break;case"sessionStorage":n=_(sessionStorage,T.TOKEN_STORAGE_NAME);break;case"cookie":n=_(g.getCookieStorage(),T.TOKEN_STORAGE_NAME);break;default:throw new y("Unrecognized storage option")}var r={emitter:new k,autoRenew:t.autoRenew,expireTimeouts:{},renewPromise:{}};this.add=v.bind(c,this,e,r,n),this.get=v.bind(l,this,e,r,n),this.remove=v.bind(f,this,r,n),this.clear=v.bind(h,this,r,n),this.renew=v.bind(d,this,e,r,n),this.on=v.bind(r.emitter.on,r.emitter),this.off=v.bind(r.emitter.off,r.emitter),u(e,r,n)}var v=n(13),y=n(18),g=n(16),w=n(8),k=n(28),T=n(19),_=n(17);e.exports=m},function(e,t){function n(){}n.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){o.off(e,r),t.apply(n,arguments)}var o=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;for(r;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t)for(var i=0,s=r.length;i<s;i++)r[i].fn!==t&&r[i].fn._!==t&&o.push(r[i]);return o.length?n[e]=o:delete n[e],this}},e.exports=n}])});
//# sourceMappingURL=okta-auth-js.min.js.map